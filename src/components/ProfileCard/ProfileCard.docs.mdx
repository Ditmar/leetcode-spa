# ProfileCard

Un componente reutilizable para mostrar la informaci√≥n de perfil de un usuario, incluyendo avatar, nombre, nombre de usuario, rol y estad√≠sticas clave como cursos inscritos, puntos y ranking.

---

## üìã Descripci√≥n general

El componente `ProfileCard` proporciona una forma flexible y personalizable de mostrar la informaci√≥n de un perfil de usuario. Admite m√∫ltiples variantes de tama√±o y dise√±o, y maneja correctamente casos como avatares faltantes o nombres largos.

---

## ‚ú® Caracter√≠sticas

- **Avatar Display:** Muestra el avatar del usuario con un fallback autom√°tico a iniciales o √≠cono por defecto
- **User Information:** Presenta nombre, nombre de usuario y rol opcional
- **Statistics Section:** Muestra cursos, puntos y ranking con √≠conos descriptivos
- **Size Variants:** Tres tama√±os disponibles (peque√±o, mediano y grande)
- **Layout Variants:** Tres dise√±os disponibles (por defecto, compacto y expandido)
- **Responsive Design:** Manejo autom√°tico de texto largo con truncamiento y tooltips
- **Accessible:** Uso correcto de atributos ARIA y HTML sem√°ntico
- **Customizable:** Soporte para clases CSS personalizadas y todas las props de MUI Card

---

## üì¶ Instalaci√≥n y uso

```typescript
import { ProfileCard } from '@/components/ProfileCard';
```

---

## üéØ Props

### Props Requeridas

| Prop | Tipo | Descripci√≥n |
|------|------|-------------|
| `name` | `string` | Nombre completo del usuario |
| `username` | `string` | Nombre de usuario o handle |

### Props Opcionales

| Prop | Tipo | Default | Descripci√≥n |
|------|------|---------|-------------|
| `avatarUrl` | `string` | `undefined` | URL del avatar del usuario |
| `role` | `string` | `undefined` | Rol o t√≠tulo del usuario |
| `stats` | `ProfileStatsProps` | `{ courses: 0, points: 0, ranking: 0 }` | Objeto con estad√≠sticas del usuario |
| `size` | `'small' \| 'medium' \| 'large'` | `'medium'` | Tama√±o del card |
| `variant` | `'default' \| 'compact' \| 'expanded'` | `'default'` | Variante de layout |
| `showStats` | `boolean` | `true` | Muestra u oculta la secci√≥n de estad√≠sticas |
| `className` | `string` | `undefined` | Clase CSS personalizada |
| `data-testid` | `string` | `'profile-card'` | ID para testing |

### Tipo `ProfileStatsProps`

```typescript
interface ProfileStatsProps {
  courses: number;  // N√∫mero de cursos completados o inscritos
  points: number;   // Total de puntos acumulados
  ranking: number;  // Posici√≥n actual en el ranking (0 = sin ranking)
}
```

---

## üöÄ Ejemplos de uso

### Ejemplo b√°sico

```tsx
import { ProfileCard } from '@/components/ProfileCard';

const MyComponent = () => {
  return (
    <ProfileCard
      name="John Doe"
      username="johndoe"
      role="Senior Developer"
      avatarUrl="https://example.com/avatar.jpg"
      stats={{ courses: 12, points: 3450, ranking: 23 }}
    />
  );
};
```

### Sin avatar (muestra iniciales)

```tsx
<ProfileCard
  name="Michael Chen"
  username="mchen"
  role="Data Scientist"
  stats={{ courses: 15, points: 4200, ranking: 7 }}
/>
```

### Sin estad√≠sticas

```tsx
<ProfileCard
  name="Emily Davis"
  username="emilyd"
  role="Product Manager"
  showStats={false}
/>
```

### Tama√±o peque√±o con variante compacta

```tsx
<ProfileCard
  name="Lisa Anderson"
  username="lisaa"
  role="UX Designer"
  size="small"
  variant="compact"
  stats={{ courses: 6, points: 1800, ranking: 89 }}
/>
```

### Con nombres largos (truncamiento autom√°tico)

```tsx
<ProfileCard
  name="Alexander Christopher Montgomery III"
  username="verylongusernamethatexceedstheavailablespace"
  role="Chief Technology Officer"
  avatarUrl="https://example.com/avatar.jpg"
  stats={{ courses: 25, points: 8950, ranking: 1 }}
/>
```

---

## üé® Variantes de tama√±o

### Small
- Avatar: 48px
- Padding: 16px
- **Ideal para:** Listas densas, sidebars, comentarios

### Medium (default)
- Avatar: 64px
- Padding: 20px
- **Ideal para:** Uso general, dashboards, grids

### Large
- Avatar: 80px
- Padding: 24px
- **Ideal para:** P√°ginas de perfil, headers destacados

---

## üîß Variantes de layout

### Default
- Layout vertical centrado
- Avatar arriba, informaci√≥n abajo
- Estad√≠sticas en fila horizontal
- **Ideal para:** Cards independientes, grids

### Compact
- Layout horizontal
- Avatar a la izquierda
- Informaci√≥n a la derecha
- Estad√≠sticas en fila
- **Ideal para:** Listas de usuarios, comentarios, sidebars

### Expanded
- Layout vertical centrado
- Estad√≠sticas en columna vertical
- Mayor espacio entre elementos
- **Ideal para:** P√°ginas de perfil detalladas, modales

---

## ‚ôø Accesibilidad

El componente incluye soporte completo de accesibilidad seg√∫n WCAG 2.1:

- ‚úÖ **ARIA roles:** `role="article"` para el card, `role="region"` para estad√≠sticas
- ‚úÖ **ARIA labels:** `aria-label` descriptivos para lectores de pantalla
- ‚úÖ **Alt text:** Texto alternativo apropiado para avatares
- ‚úÖ **Semantic HTML:** Estructura sem√°ntica correcta con heading para nombre
- ‚úÖ **Keyboard navigation:** Totalmente navegable por teclado
- ‚úÖ **Screen readers:** Optimizado para experiencia con lectores de pantalla
- ‚úÖ **Title attributes:** Tooltips para texto truncado

---

## üé≠ Personalizaci√≥n

### Usando className

```tsx
<ProfileCard
  className="custom-profile-card"
  name="Jane Doe"
  username="janedoe"
/>
```

```css
.custom-profile-card {
  border: 2px solid #007bff;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}
```

### Usando MUI sx prop

```tsx
<ProfileCard
  sx={{
    backgroundColor: 'background.paper',
    boxShadow: 3,
    '&:hover': {
      boxShadow: 6,
    },
  }}
  name="Jane Doe"
  username="janedoe"
/>
```

**Nota:** Todos los estilos usan el sistema de dise√±o de MUI (`theme.spacing`, `theme.palette`). No se usan valores hardcodeados ni clases CSS externas.

---

## üì± Responsive Design

El componente incluye breakpoints responsive autom√°ticos:

- **Mobile (< 600px):** Layout vertical forzado, tama√±os reducidos
- **Tablet (600px - 960px):** Ajusta seg√∫n variante seleccionada
- **Desktop (> 960px):** Layout completo seg√∫n configuraci√≥n

Los breakpoints usan el sistema de MUI (`theme.breakpoints`).

---

## ‚úÖ Mejores pr√°cticas

1. **Siempre proporciona name y username:** Son props requeridas
2. **Usa avatares cuando est√©n disponibles:** Mejora significativamente la UX
3. **Elige el tama√±o apropiado:** Seg√∫n el contexto y espacio disponible
4. **Considera la variante de layout:** Seg√∫n el dise√±o de tu interfaz
5. **Oculta estad√≠sticas si no son relevantes:** Usa `showStats={false}`
6. **Proporciona stats completas:** Incluye courses, points y ranking
7. **Usa data-testid en tests:** Para facilitar las pruebas automatizadas
8. **Valida datos antes de pasar:** Aseg√∫rate de que los n√∫meros sean v√°lidos

---

## üß™ Testing

El componente est√° completamente testeado usando selectores sem√°nticos. Ejemplos:

```typescript
import { render, screen } from '@testing-library/react';
import { ProfileCard } from './ProfileCard';

describe('ProfileCard', () => {
  it('renders correctly', () => {
    render(
      <ProfileCard
        name="John Doe"
        username="johndoe"
        role="Developer"
        stats={{ courses: 10, points: 2500, ranking: 15 }}
      />
    );

    // Usa selectores sem√°nticos, no data-testid
    expect(screen.getByRole('article')).toBeInTheDocument();
    expect(screen.getByRole('heading', { name: /john doe/i })).toBeInTheDocument();
    expect(screen.getByRole('region', { name: /user statistics/i })).toBeInTheDocument();
  });

  it('shows initials when no avatar', () => {
    render(
      <ProfileCard
        name="Jane Doe"
        username="janedoe"
      />
    );

    const avatar = screen.getByTestId('profile-avatar');
    expect(avatar).toHaveTextContent('JD');
  });
});
```

**Nota:** Se priorizan selectores sem√°nticos (`getByRole`, `getByText`) sobre `getByTestId` para mejorar accesibilidad y robustez de las pruebas.

---

## üîç Troubleshooting

### El avatar no se muestra
- Verifica que la URL sea v√°lida y accesible
- Comprueba los CORS si la imagen es externa
- Aseg√∫rate de que el formato sea compatible (jpg, png, webp, gif)

### Las estad√≠sticas se muestran incorrectamente
- Verifica que los valores sean n√∫meros v√°lidos (no strings)
- Aseg√∫rate de pasar el objeto `stats` completo con todos los campos
- Comprueba que `showStats` no sea `false`

### El texto se trunca demasiado pronto
- Verifica el ancho del contenedor padre
- Considera usar un tama√±o m√°s grande (`size="large"`)
- Los tooltips est√°n incluidos autom√°ticamente (usa hover para ver texto completo)

### Los estilos no se aplican
- Aseg√∫rate de tener `ThemeProvider` de MUI a nivel superior
- Verifica que los estilos no sean sobrescritos por CSS global
- Comprueba la especificidad de CSS si usas `className`

### Rankings no se formatean correctamente
- El componente maneja autom√°ticamente 1st, 2nd, 3rd, 4th, 11th, 21st, 22nd, 23rd, etc.
- Ranking 0 se muestra como "-" (sin ranking)

---

## üìù Detalles de implementaci√≥n

### Formato de n√∫meros
- Los puntos usan separador de miles en formato US (ej: 2,500)
- Se usa `toLocaleString('en-US')` para consistencia

### Formato de ranking
- Usa sufijos ordinales correctos en ingl√©s
- Casos especiales: 11th, 12th, 13th (no 11st, 12nd, 13rd)
- N√∫meros regulares: 1st, 2nd, 3rd, 4th, 21st, 22nd, 23rd, etc.

### Iniciales
- Se generan autom√°ticamente del nombre
- Usa primera letra de primer y √∫ltimo nombre
- Nombres de una palabra: solo primera letra
- Fallback: "?" si no hay nombre v√°lido

---

## üîó Componentes relacionados

Componentes de MUI usados internamente:

- **Avatar:** Para mostrar imagen o iniciales
- **Card:** Contenedor base del componente
- **Typography:** Para texto consistente
- **Box:** Para layouts flexibles
- **Icons (@mui/icons-material):** SchoolIcon, StarIcon, EmojiEventsIcon

---

## üìö Recursos adicionales

- [Documentaci√≥n de MUI Card](https://mui.com/material-ui/react-card/)
- [Documentaci√≥n de MUI Avatar](https://mui.com/material-ui/react-avatar/)
- [Gu√≠a de accesibilidad ARIA](https://www.w3.org/WAI/ARIA/apg/)
- [Component-Driven Development](https://www.componentdriven.org/)
- [Testing Library Best Practices](https://testing-library.com/docs/queries/about/#priority)

---

## ü§ù Contribuciones

Para contribuir al componente:

1. Sigue las convenciones CDD establecidas
2. Usa exportaciones nombradas (no default exports)
3. A√±ade tests con selectores sem√°nticos
4. Actualiza la documentaci√≥n MDX
5. Usa `theme.spacing` y `theme.palette` (no valores hardcodeados)
6. Mant√©n la accesibilidad (ARIA, roles, labels)
7. Aseg√∫rate de que los tests pasen: `yarn test`