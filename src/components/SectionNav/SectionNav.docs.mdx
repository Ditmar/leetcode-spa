---

# SectionNav

The `SectionNav` component renders a vertical navigation intended to separate sections of an assessment or test (for example: MCQ, Programming, Debugging). It is built on top of Material UI and uses the project's styling system to ensure visual consistency.

---

**Summary**: `SectionNav` displays a vertical list of sections and allows selecting one. It supports both controlled mode (via the `activeSectionId` prop) and uncontrolled mode (internal state). The root element and items expose basic ARIA attributes for accessibility.

---

**Typical usage**

```tsx
import React from 'react';
import { SectionNav } from './SectionNav';

const sections = [
  { id: 'mcq', label: 'MCQ' },
  { id: 'programming', label: 'Programming' },
  { id: 'review', label: 'Review' },
];

export default function Example() {
  const [active, setActive] = React.useState('mcq');
  return (
    <SectionNav
      sections={sections}
      title="Sections"
      activeSectionId={active}
      onSelect={(id) => setActive(id)}
      bottomSpacing={24}
    />
  );
}
```

---

**Main props**

- `sections`: Array of objects `{ id: string; label: string }` — Required. The list of sections to render.
- `activeSectionId` *(optional)*: `string` — Id of the currently active section. When provided the component works in controlled mode.
- `onSelect` *(optional)*: `(id: string) => void` — Callback fired when a section is selected.
- `title` *(optional)*: `string` — Title text rendered above the list.
- `bottomSpacing` *(optional)*: `string | number` — Adjusts the bottom padding of the `Root`. Numeric values are interpreted as pixels.
- `className` *(optional)*: `string` — Allows passing external CSS classes.
- Remaining props: forwarded to the root `Box` component (for example `sx`, `data-*`, etc.).

---

**Behavior and considerations**

- Controlled vs uncontrolled: If you pass `activeSectionId` the component follows that value; otherwise it manages its own internal state and updates selection on click.
- The root element is a `nav` with an `aria-label` (uses `title` when provided, otherwise defaults to `Navigation`).
- The selected item uses `aria-current=\"page\"` to improve screen reader navigation.
- Items are `ListItemButton` instances from MUI, so they inherit focus, hover and accessibility behavior from MUI.

---

**Styling and theme tokens**

- The component uses `SectionNav.styles.ts` and theme tokens (via `getSectionNavTokens`) for dimensions (width, item height), typography and colors. To adjust appearance, update the tokens in the theme helpers located in the style library.

---

**Dark mode support**

- `SectionNav` supports dark mode via the theme: when `theme.palette.mode === 'dark'` the component will use the dark token set returned by `getSectionNavTokens`.
- Default dark tokens are defined in `src/style-library/types/theme.helpers.ts` under `sectionNavDarkTokens`. The default values include (but are not limited to):
  - `background`: `#0b1220`
  - `text`: `#E6F0FF`
  - `gradientStart`: `#8F3DEB`
  - `gradientEnd`: `#C89BFF`
  - `hoverBackground`: `rgba(230,240,255,0.06)`
- To enable dark mode at runtime wrap your app with MUI's `ThemeProvider` using a theme created with `createDarkTheme()` or `createCustomTheme({ mode: 'dark' })` so `theme.palette.mode` is set to `'dark'`.

```tsx
import React from 'react';
import { ThemeProvider } from '@mui/material/styles';
import { createCustomTheme } from 'src/style-library/types/theme.helpers';
import { SectionNav } from './SectionNav';

const darkTheme = createCustomTheme({ mode: 'dark' });

export default function ExampleDark() {
  return (
    <ThemeProvider theme={darkTheme}>
      <SectionNav sections={[{ id: 'a', label: 'A' }]} title="Sections" />
    </ThemeProvider>
  );
}
```

- To customize dark colors for `SectionNav`, provide `componentTokens.sectionNavDark` when creating your custom theme; `getSectionNavTokens` will prefer `theme.componentTokens.sectionNavDark` over the defaults.
- When customizing, ensure sufficient contrast for readability and accessibility (hover/selected states are also token-driven).

**Responsive behavior**

- `SectionNav` is responsive and adapts to three breakpoint categories: `desktop`, `tablet` and `mobile`. The component relies on theme tokens and CSS-in-JS breakpoints to adjust dimensions, typography and spacing.
- Key tokens used for responsiveness (via `getSectionNavTokens`):
  - `dimensions.navWidth.{desktop|tablet|mobile}` — controls the navigation column width and min-width.
  - `dimensions.itemHeight.{desktop|tablet|mobile}` — controls the list item height and vertical rhythm.
  - `typography.titleFontSize.{desktop|tablet|mobile}` — title font sizes per breakpoint.
  - `typography.itemFontSize.{desktop|tablet|mobile}` — item font sizes per breakpoint.
- In `SectionNav.styles.ts` the styles use `theme.customBreakpoints.tablet` and `theme.customBreakpoints.mobile` to apply different paddings, border radii and size rules for smaller screens. For example, `Root` adjusts `width` and `borderRadius`, while `StyledItemButton` and `Title` change `height`, `fontSize` and paddings.
- To customize responsive values:
  - Provide custom values for `componentTokens.sectionNav` (or `sectionNavDark`) when creating your theme. Update the `dimensions` and `typography` nested fields to change widths, item heights and font sizes per breakpoint.
  - If you need different breakpoint thresholds, adjust `theme.customBreakpoints` when creating the theme factory (`createCustomTheme`).

Example — overriding nav widths and item heights for responsive breakpoints:

```ts
// pseudo-code: merge your tokens into the theme's componentTokens
import { createCustomTheme } from 'src/style-library/types/theme.helpers';

const theme = createCustomTheme({ mode: 'light' });

theme.componentTokens = {
  ...theme.componentTokens,
  sectionNav: {
    ...theme.componentTokens.sectionNav,
    dimensions: {
      navWidth: { desktop: 280, tablet: 200, mobile: 140 },
      itemHeight: { desktop: 88, tablet: 64, mobile: 44 },
    },
  },
};

// Wrap your app with ThemeProvider using the modified theme
```

- Testing tips: view the component at multiple viewport sizes in Storybook or in the browser DevTools device toolbar to verify padding, font sizes and selected/hover states remain usable and accessible.
- Accessibility note: ensure that font sizes and touch target heights remain large enough on mobile; consider increasing `itemHeight.mobile` if users need larger tappable areas.


**Additional examples**

- Long list (no internal scroll): If you need to render many sections, control the parent layout rather than forcing an internal scroll inside `SectionNav`.

```tsx
<SectionNav
  sections={Array.from({ length: 20 }, (_, i) => ({ id: `s${i+1}`, label: `Section ${i+1}` }))}
  title="Sections"
  onSelect={(id) => console.log(id)}
/>
```

---

**Storybook tips**

- In `SectionNav.stories.tsx` there is a decorator that updates `activeSectionId` when an item is selected. This helps to visualize interaction in stories.
- Use `argTypes` to expose `activeSectionId` and `bottomSpacing` in the controls panel.

---

**Accessibility (a11y)**

- `nav[aria-label]` describes the region; provide a descriptive `title` when relevant.
- `aria-current=\"page\"` identifies the active item to assistive technologies.
- Ensure sufficient color contrast for text; the theme tokens aim to meet minimum contrast requirements.

---

**Unit tests & validation**

- Unit tests for this component should verify:
  - Rendering of sections and title.
  - Controlled behavior when `activeSectionId` is provided.
  - `onSelect` is called with the correct id on click.
  - `aria-current` and `aria-label` attributes are present and correct.
  - Disabled or keyboard navigation behaviors if applicable.

---

**Files & implementation**

- `src/components/SectionNav/SectionNav.tsx` — implementation.
- `src/components/SectionNav/SectionNav.styles.ts` — styles and tokens.
- `src/components/SectionNav/SectionNav.types.ts` — TypeScript types.
- `src/components/SectionNav/SectionNav.stories.tsx` — Storybook stories.

---

This document is intended as the component reference. Visual or behavior changes must be implemented in the component files or in the theme tokens.
