import { Meta, Story, Canvas } from '@storybook/blocks';
import { Box, Typography } from '@mui/material';
import * as CountdownTimerStories from './CountdownTimer.stories';

<Meta of={CountdownTimerStories} title="Components/CountdownTimer/Docs" />

# ‚è± CountdownTimer

<Typography variant="body1" sx={{ fontFamily: 'Syne, sans-serif', mb: 2 }}>
  The <code>CountdownTimer</code> component displays a countdown timer in <code>mm:ss</code> format. It is ideal for time-sensitive interfaces such as quizzes, surveys, or form submissions. The timer updates every second and triggers a callback when it reaches zero.
</Typography>

---

## üéØ Purpose

- Display a countdown in `mm:ss` format  
- Trigger a callback when time runs out  
- Provide visual feedback for timed interactions  

---

## ‚ú® Features

- Accepts `seconds` and `onComplete` props  
- Uses a custom hook (`useCountdownTimer`) for time management  
- Formats time with leading zeros  
- Styled with MUI and theme tokens  
- Fully responsive and accessible  
- Includes unit tests and Storybook stories  

---

## ‚öôÔ∏è Props

<Box sx={{ overflowX: 'auto', border: '1px solid #333', borderRadius: 2, mt: 2, mb: 3, fontFamily: 'Syne, sans-serif' }}>
  <table style={{ width: '100%', borderCollapse: 'collapse', minWidth: '600px' }}>
    <thead>
      <tr>
        <th style={{ textAlign: 'left', padding: '8px', borderBottom: '1px solid #555' }}>Prop</th>
        <th style={{ textAlign: 'left', padding: '8px', borderBottom: '1px solid #555' }}>Type</th>
        <th style={{ textAlign: 'left', padding: '8px', borderBottom: '1px solid #555' }}>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style={{ padding: '8px' }}><code>seconds</code></td>
        <td style={{ padding: '8px' }}><code>number</code></td>
        <td style={{ padding: '8px' }}>Total time in seconds from which the countdown begins.</td>
      </tr>
      <tr>
        <td style={{ padding: '8px' }}><code>onComplete</code></td>
        <td style={{ padding: '8px' }}><code>() => void</code></td>
        <td style={{ padding: '8px' }}>Callback function triggered when the timer reaches zero.</td>
      </tr>
    </tbody>
  </table>
</Box>

---

## üß© Component Structure

- `CountdownTimer.tsx`: main component  
- `CountdownTimer.hook.ts`: custom hook for countdown logic  
- `CountdownTimer.constants.ts`: formatting constants  
- `CountdownTimer.styles.ts`: styled components with MUI  
- `CountdownTimer.types.ts`: TypeScript types  
- `CountdownTimer.test.tsx`: unit tests  
- `CountdownTimer.stories.tsx`: Storybook stories  
- `CountdownTimer.docs.mdx`: documentation  

---

## üé® Design and Styles

- Typography and layout based on MUI  
- Font: Syne, bold weight  
- Responsive sizing with `theme.spacing`  
- Color tokens for consistency  
- Accessible contrast and readable formatting  

### üßæ Visual Style Reference

<Box sx={{ overflowX: 'auto', border: '1px solid #333', borderRadius: 2, mt: 2, mb: 3, fontFamily: 'Syne, sans-serif' }}>
  <table style={{ width: '100%', borderCollapse: 'collapse', minWidth: '600px' }}>
    <thead>
      <tr>
        <th style={{ padding: '8px', borderBottom: '1px solid #555' }}>Element</th>
        <th style={{ padding: '8px', borderBottom: '1px solid #555' }}>Property</th>
        <th style={{ padding: '8px', borderBottom: '1px solid #555' }}>Value</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style={{ padding: '8px' }} rowSpan={8}><strong>Countdown Text</strong></td>
        <td style={{ padding: '8px' }}>Font Family</td>
        <td style={{ padding: '8px' }}>Syne</td>
      </tr>
      <tr><td style={{ padding: '8px' }}>Font Weight</td><td style={{ padding: '8px' }}>700</td></tr>
      <tr><td style={{ padding: '8px' }}>Font Style</td><td style={{ padding: '8px' }}>Bold</td></tr>
      <tr><td style={{ padding: '8px' }}>Font Size</td><td style={{ padding: '8px' }}>40px</td></tr>
      <tr><td style={{ padding: '8px' }}>Leading Trim</td><td style={{ padding: '8px' }}>NONE</td></tr>
      <tr><td style={{ padding: '8px' }}>Line Height</td><td style={{ padding: '8px' }}>100%</td></tr>
      <tr><td style={{ padding: '8px' }}>Letter Spacing</td><td style={{ padding: '8px' }}>0%</td></tr>
      <tr><td style={{ padding: '8px' }}>Text Transform</td><td style={{ padding: '8px' }}>Capitalize</td></tr>
      <tr>
        <td style={{ padding: '8px' }}><strong>Countdown Background</strong></td>
        <td style={{ padding: '8px' }}>Background</td>
        <td style={{ padding: '8px' }}>#A9A9A9</td>
      </tr>
      <tr>
        <td style={{ padding: '8px' }} rowSpan={7}><strong>Chronometer Icon</strong></td>
        <td style={{ padding: '8px' }}>Width</td>
        <td style={{ padding: '8px' }}>44.79px</td>
      </tr>
      <tr><td style={{ padding: '8px' }}>Height</td><td style={{ padding: '8px' }}>46.35px</td></tr>
      <tr><td style={{ padding: '8px' }}>Top</td><td style={{ padding: '8px' }}>1.04px</td></tr>
      <tr><td style={{ padding: '8px' }}>Left</td><td style={{ padding: '8px' }}>2.6px</td></tr>
      <tr><td style={{ padding: '8px' }}>Angle</td><td style={{ padding: '8px' }}>0¬∞</td></tr>
      <tr><td style={{ padding: '8px' }}>Opacity</td><td style={{ padding: '8px' }}>1</td></tr>
      <tr><td style={{ padding: '8px' }}>Background</td><td style={{ padding: '8px' }}>#AE8CFA</td></tr>
    </tbody>
  </table>
</Box>

---

## ‚ôø Accessibility

- Uses semantic roles (`role="img"`, `aria-label`)  
- Keyboard-friendly layout  
- Clear visual hierarchy  
- Screen-reader compatible  

---

## üß™ Unit Tests

- Validates countdown decrement  
- Ensures `onComplete` is called  
- Verifies interval cleanup on unmount  
- Uses mocked timers for precision  

---

## üì¶ Storybook Usage

### Default Timer

<Canvas>
  <Story of={CountdownTimerStories.Default} />
</Canvas>

---

## ‚úÖ Best Practices Applied

- Component-Driven Development (CDD)  
- Separation of concerns (logic, styles, types)  
- Reusability and scalability  
- WCAG AA accessibility  
- Responsive design  
- Full test coverage  